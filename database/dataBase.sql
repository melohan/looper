-- -----------------------------------------------------
-- Looper development Database
-- -----------------------------------------------------
-- MySQL Script generated by MySQL Workbench
-- Sun Oct 24 22:15:21 2021
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET
@OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET
@OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET
@OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema looper
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `looper`;

-- -----------------------------------------------------
-- Schema looper
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `looper` DEFAULT CHARACTER SET utf8;
USE
`looper` ;

-- -----------------------------------------------------
-- Table `looper`.`status`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `looper`.`status`;

CREATE TABLE IF NOT EXISTS `looper`.`status`
(
    `id`
    INT
    NOT
    NULL
    AUTO_INCREMENT,
    `name`
    VARCHAR
(
    45
) NOT NULL,
    PRIMARY KEY
(
    `id`
),
    UNIQUE INDEX `name_UNIQUE`
(
    `name` ASC
) VISIBLE)
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `looper`.`exercises`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `looper`.`exercises`;

CREATE TABLE IF NOT EXISTS `looper`.`exercises`
(
    `id`
    INT
    NOT
    NULL
    AUTO_INCREMENT,
    `title`
    VARCHAR
(
    150
) NULL,
    `status_id` INT NOT NULL,
    PRIMARY KEY
(
    `id`
),
    INDEX `fk_exercises_status1_idx`
(
    `status_id` ASC
) VISIBLE,
    CONSTRAINT `fk_exercises_status1`
    FOREIGN KEY
(
    `status_id`
)
    REFERENCES `looper`.`status`
(
    `id`
)
    ON DELETE CASCADE
    ON UPDATE NO ACTION)
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `looper`.`types`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `looper`.`types`;

CREATE TABLE IF NOT EXISTS `looper`.`types`
(
    `id`
    INT
    NOT
    NULL
    AUTO_INCREMENT,
    `name`
    VARCHAR
(
    45
) NOT NULL,
    PRIMARY KEY
(
    `id`
),
    UNIQUE INDEX `name_UNIQUE`
(
    `name` ASC
) VISIBLE)
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `looper`.`questions`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `looper`.`questions`;

CREATE TABLE IF NOT EXISTS `looper`.`questions`
(
    `id`
    INT
    NOT
    NULL
    AUTO_INCREMENT,
    `text`
    VARCHAR
(
    255
) NULL,
    `exercise_id` INT NOT NULL,
    `type_id` INT NOT NULL,
    PRIMARY KEY
(
    `id`
),
    INDEX `fk_questions_exercises_idx`
(
    `exercise_id` ASC
) VISIBLE,
    INDEX `fk_questions_types1_idx`
(
    `type_id` ASC
) VISIBLE,
    CONSTRAINT `fk_questions_exercises`
    FOREIGN KEY
(
    `exercise_id`
)
    REFERENCES `looper`.`exercises`
(
    `id`
)
    ON DELETE CASCADE
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_questions_types1`
    FOREIGN KEY
(
    `type_id`
)
    REFERENCES `looper`.`types`
(
    `id`
)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `looper`.`users`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `looper`.`users`;

CREATE TABLE IF NOT EXISTS `looper`.`users`
(
    `id`
    INT
    NOT
    NULL
    AUTO_INCREMENT,
    `name`
    VARCHAR
(
    100
) NOT NULL DEFAULT 'user',
    PRIMARY KEY
(
    `id`
))
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `looper`.`answers`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `looper`.`answers`;

CREATE TABLE IF NOT EXISTS `looper`.`answers`
(
    `id`
    INT
    NOT
    NULL
    AUTO_INCREMENT,
    `question_id`
    INT
    NOT
    NULL,
    `user_id`
    INT
    NOT
    NULL,
    `answer`
    VARCHAR
(
    255
) NULL,
    INDEX `fk_answers_questions1_idx`
(
    `question_id` ASC
) VISIBLE,
    INDEX `fk_answers_users1_idx`
(
    `user_id` ASC
) VISIBLE,
    PRIMARY KEY
(
    `id`
),
    CONSTRAINT `fk_answers_questions1`
    FOREIGN KEY
(
    `question_id`
)
    REFERENCES `looper`.`questions`
(
    `id`
)
    ON DELETE CASCADE
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_answers_users1`
    FOREIGN KEY
(
    `user_id`
)
    REFERENCES `looper`.`users`
(
    `id`
)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
    ENGINE = InnoDB;


SET
SQL_MODE=@OLD_SQL_MODE;
SET
FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET
UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- Development data insertion
-- Thu Oct 21 18:12:54 2021
-- Version: 1.0

--  ----------------- Types insertion ----------------- --

INSERT INTO looper.types (name)
VALUES ("Single line text");
INSERT INTO looper.types (name)
VALUES ("List of single lines");
INSERT INTO looper.types (name)
VALUES ("Multi-line text");

--  ----------------- Status insertion ----------------- --

INSERT INTO looper.status (name)
VALUES ("Building");
INSERT INTO looper.status (name)
VALUES ("Answering");
INSERT INTO looper.status (name)
VALUES ("Closed");

--  ----------------- Types insertion ----------------- --

INSERT INTO looper.types (name)
VALUES ("Single line text");
INSERT INTO looper.types (name)
VALUES ("List of single lines");
INSERT INTO looper.types (name)
VALUES ("Multi-line text");

--  ----------------- Status insertion ----------------- --

INSERT INTO looper.status (name)
VALUES ("Building");
INSERT INTO looper.status (name)
VALUES ("Answering");
INSERT INTO looper.status (name)
VALUES ("Closed");

INSERT INTO `exercises` (`id`, `title`, `status_id`)
VALUES (1, 'Culture générale', 1),
       (2, 'Quizz mathématiques', 2),
       (3, 'Révisions allemand', 2),
       (4, 'Révisions anglais', 3),
       (5, 'Chimie culture générale', 2),
       (6, 'Orthographe', 1),
       (7, 'Quizz de culture générale niveau Expert', 2);

INSERT INTO `questions` (`id`, `text`, `exercise_id`, `type_id`)
VALUES (1, 'Quel est le plus grand lac de Suisse ?', 1, 2),
       (2, 'Quelle pièce est absolument à protéger dans un jeu d\'échec ?', 1, 2),
	(3, 'Combien y a-t-il de signes astrologiques chinois ?', 1, 2),
	(4, 'Qui a écrit les misérables ?', 1, 1),
	(5, 'Quel est la 1ère émission de télé réalité a avoir été diffuser en France ?', 1, 3),
	(6, 'Le produit est le résultat :', 2, 2),
	(7, 'Quel est le carré du quart du tiers de 12 ?', 2, 1),
	(8, 'Une carte routière est à l\'échelle 1/250 000. Quelle distance réelle représentent 4 cm sur cette carte ?', 2,
        3),
       (9, 'Bananen sind reich ... Magnesium', 3, 1),
       (10, 'Er braucht ... zu sagen', 3, 1),
       (11, 'Ich habe ... ein Döner zu essen', 3, 3),
       (12, 'What are ... names? Dan and Sandra', 4, 1),
       (13, 'I don’t want to ... at home tonight, I want to come with you!', 4, 1),
       (14, 'I have a meeting ... 4 p.m.', 4, 1),
       (15, 'Comment s\'appelle la table de laboratoire sur laquelle le chimiste fait ses expériences ?', 5, 1),
	(16, 'Quel grand physicien, prix Nobel, découvrit la radioactivité ?', 5, 1),
	(17, 'Quel est le troisième état de la matière (les deux premiers étant : solide, liquide) ?', 5, 1),
	(18, 'À quelle température, l\'eau se change-t-elle en gaz ?', 5, 1),
       (19, 'Les pommes qu’elle a acheté… sont trop mûres.', 6, 1),
       (20, 'Selon la légende, comment le pape Adrien IV est-il mort en 1159 ?', 7, 1),
       (21, 'Que signifie "palimpseste"?', 7, 1),
       (22, 'Quel philosophe a écrit « Les origines du totalitarisme » et « La crise de la culture » ? ', 7, 3);


INSERT INTO `users` (`id`, `name`)
VALUES (1, '2021-12-20 09:45:47 UTC'),
       (2, '2021-12-20 09:46:05 UTC'),
       (3, '2021-12-20 09:48:31 UTC');

INSERT INTO `answers` (`id`, `question_id`, `user_id`, `answer`)
VALUES (1, 12, 1, 'theirs'),
       (2, 13, 1, 'go'),
       (3, 14, 1, 'at'),
       (4, 12, 2, 'Je sais pas'),
       (5, 13, 2, 'Je sais pas'),
       (6, 14, 2, 'Je sais pas'),
       (7, 15, 3, 'Table d\' Ikea'),
	(8, 16, 3, 'Pittet'),
	(9, 17, 3, 'gazeux'),
	(10, 18, 3, '100°C');